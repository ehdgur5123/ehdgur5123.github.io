---
layout: single
title: "5) nmap 명령어"
categories: Security
tag: [Security]
permalink : /posts/Security-05/
toc: true
classes: custom-style
author_profile: false
sidebar:
  nav: "Security"
---

<hr>

# nmap 명령어

`nmap`(Network Mapper)은 네트워크 스캐닝 및 보안 감사 도구로, 네트워크의 포트 스캐닝, 호스트 발견, 서비스 및 운영체제(OS) 감지를 수행할 수 있습니다. 오픈 소스로 제공되며, 네트워크 관리 및 보안 분석을 위한 강력한 기능을 제공합니다. `nmap`은 네트워크의 장비 및 서비스 구성을 확인하고, **취약한 서비스나 포트를 탐지**하여 **보안 문제를 진단**하는 데 유용합니다.

`nmap`에 대한 더욱 자세한 정보를 알고 싶으면 다음을 참조하세요. (👉 nmap.org)[https://nmap.org/]

## 1. nmap 명령어 기본 구문

```bash
nmap [옵션] [대상 IP 주소 또는 호스트 이름]
```

## 2. 주요 기능 및 특징

1. **포트 스캔**: 대상 시스템의 열려 있는 포트(예: 80, 443)를 확인하여, 해당 포트에서 어떤 서비스가 실행 중인지 확인할 수 있습니다.
2. **호스트 탐색**: 네트워크 상의 활성화된 호스트(온라인 상태)를 확인하여 장비 목록을 생성할 수 있습니다.
3. **서비스 및 버전 탐지**: 실행 중인 서비스의 종류 및 버전을 탐지하여, 어떤 소프트웨어가 동작 중인지 확인할 수 있습니다.
4. **운영체제(OS) 탐지**: 대상 시스템의 운영체제 유형 및 버전을 확인하여, 리눅스, 윈도우 등 OS 정보를 수집합니다.
5. **방화벽 및 IDS/IPS 우회**: 방화벽이나 침입 탐지 시스템(IDS)을 우회하여 보안 장비 뒤의 네트워크 정보를 탐지할 수 있습니다.
6. **취약점 탐지**: 추가 스크립트(-sC)를 사용하여 취약점이나 비정상적인 서비스 설정을 탐지할 수 있습니다.

## 3. 주요 옵션 및 조건

### 대상 시스템의 기본 포트 스캔

기본적으로 `nmap` 명령어는 대상 시스템의 상위 <b>1,000개</b> 포트를 스캔합니다. **열려 있는 포트와 실행 중인 서비스를 탐지**하여 간단한 네트워크 상태를 확인할 수 있습니다.

```bash
nmap 192.168.111.129   

>>>
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-05 21:03 EDT
Nmap scan report for 192.168.111.129
Host is up (0.00085s latency).
Not shown: 991 closed tcp ports (conn-refused)
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
139/tcp  open  netbios-ssn
143/tcp  open  imap
443/tcp  open  https
445/tcp  open  microsoft-ds
5001/tcp open  commplex-link
8080/tcp open  http-proxy
8081/tcp open  blackice-icecap
```

예시: `192.168.111.129`의 상위 1,000개 포트를 스캔하고, 열려 있는 포트와 실행 중인 서비스를 출력합니다.

### 특정 포트만 스캔하기(-p)

`-p` 옵션을 사용하여 **특정 포트 또는 포트 범위를 지정**할 수 있습니다. 기본 포트(상위 1,000개) 외에, 특정 포트를 지정하여 탐색을 수행할 때 유용합니다.

```bash
nmap -p 80,443 example.com
```

예시1: `example.com`의 <b>80번 포트(HTTP)<b>와 <b>443번 포트(HTTPS)<b>만을 스캔합니다.

```bash
nmap -p 1-65535 example.com
```

예시2: `example.com`의 <b>모든 포트(1번부터 65535번까지)</b>를 스캔합니다.

### 서비스 및 버전 정보 탐지(-sV)

`-sV` 옵션을 사용하면, `nmap`은 열려 있는 포트의 **서비스 종류 및 버전 정보를 탐지**합니다. 이를 통해 대상 시스템에서 실행 중인 특정 애플리케이션의 버전을 확인할 수 있습니다.

```bash
nmap -sV example.com
```

예시: `example.com`의 열려 있는 포트에서 실행 중인 서비스 및 버전 정보를 탐지합니다.

### 운영체제(OS) 탐지(-O)

`-O` 옵션은 대상 시스템의 **운영체제(OS)**를 탐지합니다. TCP/IP 스택을 분석하여, 리눅스, 윈도우 등의 운영체제와 버전을 식별할 수 있습니다.

```bash
nmap -O example.com
```

예시: `example.com`의 운영체제 정보를 탐지하여, 리눅스, 윈도우 등의 OS 정보를 출력합니다.

### 호스트 탐지(-sn)

`-sn` 옵션을 사용하면, `nmap`이 포트 스캔을 수행하지 않고 대상 네트워크에서 **활성화된 호스트(온라인 상태인 시스템)**만 탐색합니다. 이를 통해 네트워크 상의 장비 목록을 쉽게 생성할 수 있습니다.

```bash
nmap -sn 192.168.1.0/24
```

예시: `192.168.1.0/24` 네트워크 범위의 활성화된 호스트를 탐지하여 목록을 출력합니다.

<small>`/24`는 서브넷 마스크(255.255.255.0)로, 네트워크 부분이 24 비트(`192.168.1`) 호스트 부분이 마지막 8비트를 나타냄</small>

<small>즉, `192.168.1.0`에서 `192.168.1.255`까지의 열려있는 호스트 부분만을 탐색</small>

### 빠른 스캔(-T)

`-T` 옵션은 `nmap`의 스캔 속도(템포)를 조정하여, 빠른 스캔 또는 정밀한 스캔을 수행할 수 있습니다. 기본적으로 **5가지 레벨**이 있으며, T0(가장 느림)부터 T5(가장 빠름)까지 설정할 수 있습니다.

`-T0` ~ `-T2`는 느린 스캔으로, 네트워크에 부하를 덜 주면서 정밀한 분석을 합니다.

`-T3`는 기본 스캔 속도입니다.

`-T4` ~ `T5`는 빠른 스캔으로, 빠르게 결과를 얻을 수 있으나 정확도가 떨어질 수 있습니다.

```bash
nmap -T4 example.com
```

예시: `example.com`을 <b>빠른 속도(T4)</b>로 스캔합니다.

### 기본 스크립트를 사용한 취약점 분석 (-sC)

`-sC` 옵션은 `nmap`이 제공하는 기본 **NSE 스크립트(Nmap Scripting Engine)**의 **default 카테고리**를 사용하여 취약점 분석을 수행합니다. 이 스크립트는 일반적인 취약점 및 보안 점검을 위해 *미리 정의된 스크립트를 사용하여 대상 시스템을 분석*합니다.

```bash
nmap -sC example.com
```

예시: `example.com`에 대해 기본 보안 스크립트를 사용하여 취약점 점검을 수행합니다.

### 탐색 결과를 파일로 저장 (-o)

`-o` 옵션을 사용하면, `nmap`의 탐색 결과를 파일로 저장할 수 있습니다. 파일 형식을 텍스트 파일(`-oN`), XML 파일(`-oX`), 그렙 형식(`-oG`) 등으로 지정할 수 있습니다.

```bash
nmap -oN results.txt example.com
```

예시: `example.com`의 스캔 결과를 `results.txt` 텍스트 파일(N)로 저장합니다.

## NSE 스크립트(Nmap Scripting Engine)
nmap --script vuln