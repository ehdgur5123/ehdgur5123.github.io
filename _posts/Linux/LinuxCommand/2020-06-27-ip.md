---
layout: single
title: "ip 명령어"
categories: Linux
tag: [Linux, ip]
permalink : /posts/LinuxCommand-ip/
classes : custom-style
toc: true
author_profile: false
sidebar:
  nav: "Linux"
---

<hr>

# ip 명령어

`ip` 명령어는 Linux에서 **네트워크 인터페이스, 라우팅, 네트워크 장치 관리 등을 수행하는 도구**입니다. 이는 `ifconfig`와 같은 오래된 도구들을 대체하며, 더 많은 기능을 제공하고 있습니다. IP 주소 설정, 라우팅 테이블 관리, 네트워크 인터페이스 정보 조회 등의 작업을 수행할 수 있습니다.

## ip 명령어 기본 구문

```bash
ip [옵션] [대상] [명령]
```

`ip` 명령어는 <u>여러 서브 명령을 통해 네트워크 관련 작업을 수행</u>할 수 있으며, 그에 따라 네트워크 인터페이스 설정, 라우팅 설정, IP 주소 관리 등을 효율적으로 처리할 수 있습니다.

## 주요 옵션 및 조건

### 네트워크 인터페이스 정보 조회(ip addr show 또는 ip a)

`ip addr` 명령어를 사용하여 **네트워크 인터페이스 정보를 확인**할 수 있습니다. 이는 `ifconfig` 명령어와 유사한 기능을 제공하며, 네트워크 인터페이스의 IP 주소, 서브넷 마스크, MAC 주소, 상태 등을 출력합니다.

```bash
ip addr show
# 또는 간단히
ip a
```

예시: 시스템의 모든 네트워크 인터페이스의 IP 주소 및 관련 정보를 표시합니다.

### 네트워크 인터페이스 활성화 및 비활성화(ip link set)

네트워크 인터페이스 **활성화/비활성화**는 `ip link set` 명령어를 통해 수행됩니다.

#### 네트워크 인터페이스 활성화(up)

```bash
ip link set eth0 up
```

예시: `eth0` 네트워크 인터페이스를 활성화합니다.

#### 네트워크 인터페이스 비활성화(down)

```bash
ip link set eth0 down
```

예시: `eth0` 네트워크 인터페이스를 비활성화하여 네트워크 연결을 끊습니다.

### IP 주소 추가(ip addr add)

`ip addr add` 명령어를 사용하여 **네트워크 인터페이스에 IP 주소를 추가**할 수 있습니다. IP 주소를 설정할 때 **서브넷 마스크**도 함께 지정해야 합니다.

```bash
ip addr add 192.168.1.10/24 dev eth0
```

예시: `eth0` 네트워크 인터페이스에 IP 주소 `192.168.1.10/24`를 추가합니다.

IP 주소 뒤의 `/24`는 서브넷 마스크로 `255.255.255.0`을 의미합니다.(`8bit x 3 = 24`)

### IP 주소 제거(ip addr del)

`ip addr del` 명령어를 사용하여 **네트워크 인터페이스에 IP 주소를 제거**합니다.

```bash
ip addr del 192.168.1.10/24 dev eth0
```

예시: `eth0` 인터페이스에서 IP 주소 `192.168.1.10/24`를 제거합니다.

### 라우팅 테이블 관리(ip route)

라우팅 테이블을 관리하려면 `ip route` 명령어를 사용합니다. 이를 통해 **네트워크 트래픽이 어떤 경로로 전송되는지를 설정하거나 조회**할 수 있습니다.

#### 라우팅 테이블 조회(show)

```bash
ip route show
```

예시: 현재 라우팅 테이블을 조회하여 **트래픽 경로를 확인**합니다

##### ip route show 출력 정보 확인하기

```bash
default via 192.81.1.254 dev wlp1s0 proto dhcp metric 600 
169.254.0.0/16 dev wlp1s0 scope link metric 1000 
192.81.1.0/24 dev wlp1s0 proto kernel scope link src 192.81.1.100 metric 600
```

1. 외부 네트워크로 나가는 기본 경로(게이트웨이)

    - `default`: **기본 경로를 의미**하며, 모든 목적지가 명시되지 않았을 때 이 경로를 통해 패킷이 전송됩니다. 즉, 네트워크 상에서 목적지가 불명확한 패킷은 이 경로로 보냅니다.
    - `via 192.81.1.254`: 패킷을 이 기본 경로를 통해 전송할 때 거쳐야 하는 **라우터(게이트웨이)의 IP 주소**입니다. 여기서는 `192.81.1.254`가 게이트웨이입니다.
    - `dev wlp1s0`: 이 경로에서 사용되는 **네트워크 인터페이스**가 `wlp1s0`임을 나타냅니다. 이는 무선 네트워크 인터페이스입니다.
    - `proto dhcp`: 이 경로는 DHCP에 의해 동적으로 설정되었음을 의미합니다. DHCP는 네트워크 장치에 IP 주소 및 경로를 자동으로 할당합니다.
    - `metric 600`: **경로의 우선순위**를 나타냅니다. 숫자가 낮을수록 더 높은 우선순위를 가집니다. 여기서는 `600`이 경로의 우선순위입니다.

2. 자동 할당된 링크 로컬 IP 범위

    - `169.254.0.0/16`: 이 네트워크는 **APIPA** (Automatic Private IP Addressing) 범위입니다. IP 주소를 자동으로 할당하지 못했을 때 장치가 스스로 할당하는 IP 주소 대역입니다. 여기서는 서브넷 마스크가 `/16`로, `169.254.0.0`부터 `169.254.255.255`까지의 주소 범위를 나타냅니다.
    - `dev wlp1s0`: 이 경로는 `wlp1s0` 인터페이스를 통해 연결됩니다.
    - `scope link`: 이 경로는 **링크 로컬 범위**로, 로컬 네트워크에서만 사용 가능한 경로입니다. 외부 네트워크에는 이 경로가 유효하지 않습니다.
    - `metric 1000`: **경로의 우선순위**를 나타냅니다. `1000`은 우선순위가 낮은 값으로, 다른 경로들이 우선적으로 사용됩니다.

3. 로컬 네트워크 내부의 경로

    - `192.81.1.0/24`: 이는 서브넷을 나타냅니다. 여기서는 `192.81.1.0`부터 `192.81.1.255`까지의 **IP 주소 대역이 포함된 서브넷**입니다. `/24`는 서브넷 마스크가 `255.255.255.0`임을 의미합니다.
    - `dev wlp1s0`: 이 경로는 `wlp1s0` 네트워크 인터페이스를 통해 연결됩니다.
    - `proto kernel`: 이 경로는 커널에 의해 자동으로 설정되었음을 나타냅니다.
    - `scope link`: 이 경로는 **링크 로컬 범위**로, 로컬 네트워크 내에서만 유효합니다.
    - `src 192.81.1.100`: 이 경로를 통해 전송되는 패킷의 소스 IP 주소는 `192.81.1.100`입니다.
    - `metric 600`: **경로의 우선순위** 값입니다. `600`은 이 경로가 상대적으로 높은 우선순위를 가진다는 의미입니다.

#### 기본 게이트웨이 설정(add)

```bash
ip route add default via 192.168.1.1 dev eth0
```

예시: `eth0` 인터페이스를 통해 기본 게이트웨이를 `192.168.1.1`로 설정합니다.

### 링크 정보 조회 (ip link show)

`ip link` 명령어는 네트워크 인터페이스의 링크 상태 및 하드웨어 정보를 출력합니다. 이는 물리적 상태와 관련된 정보를 확인하는 데 유용합니다.