---
layout: single
title: "nslookup 명령어"
categories: Linux
tag: [Linux, nslookup]
permalink : /posts/LinuxCommand-nslookup/
classes : custom-style
toc: true
author_profile: false
sidebar:
  nav: "Linux"
---

<hr>

# nslookup 명령어

`nslookup`(Name Server Lookup) 명령어는 Linux, Unix 및 Windows 운영 체제에서 **DNS(Domain Name System) 조회를 수행하는 도구**입니다. 이를 통해 도메인 이름을 IP 주소로 변환하거나, IP 주소를 도메인 이름으로 변환할 수 있습니다. 또한, 특정 도메인의 네임 서버(NS) 정보나 메일 서버(MX) 정보 등의 DNS 레코드를 확인할 때도 유용합니다.

## 1. nslookup 명령어 기본 구문

```bash
nslookup [옵션] [도메인 또는 IP 주소]
```

`nslookup` 명령어는 도메인 이름 또는 IP 주소를 입력하여 해당하는 DNS 정보를 조회합니다. **도메인 이름을 입력하면 해당 IP 주소를 반환**하고, **IP 주소를 입력하면 해당 IP의 도메인 이름을 반환**합니다.

## 2. 주요 옵션 및 조건

### 도메인의 IP 주소 조회 (기본 사용)

기본적으로 `nslookup` 명령어는 도메인의 IP 주소를 조회합니다. 별도의 옵션 없이 도메인 이름만 입력하면, 해당 도메인의 **A 레코드(IPv4 주소)**를 반환합니다.

```bash
nslookup google.com

>>>
Server:         192.168.111.2
Address:        192.168.111.2#53

Non-authoritative answer:
Name:   google.com
Address: 172.217.26.238
Name:   google.com
Address: 2404:6800:4004:81c::200e
```

- `192.168.111.2`는 나의 로컬 네트워크 또는 라우터에서 지정한 DNS 서버입니다.
- `#53`은 포트로, **53번 포트**는 **DNS 요청 및 응답에 기본적으로 사용되는 표준 포트**입니다.
- `172.217.26.238`은 `google.com`의 **IPv4** 주소입니다.
- `2404:6800:4004:81c::200e`은 `google.com`의 **IPv6** 주소입니다.

### IP 주소로 도메인 이름 조회 (역방향 조회)

IP 주소를 사용하여 도메인 이름을 조회할 수 있습니다. 이는 역방향 조회로, **IP 주소에 매핑된 도메인 이름을 확인**할 때 사용됩니다.

```bash
nslookup 8.8.8.8

>>>
8.8.8.8.in-addr.arpa    name = dns.google.

Authoritative answers can be found from:
```

예시: IP 주소 `8.8.8.8`의 도메인 이름은 `dns.google` 입니다.

### 특정 DNS 서버를 사용하여 조회하기(DNS 서버 지정)

특정 DNS 서버를 지정하여 도메인 정보를 조회할 수 있습니다. 기본적으로는 로컬 시스템의 DNS 설정에 따라 조회가 이루어지지만, **다른 DNS 서버를 사용해 원하는 정보를 확인**할 때 유용합니다.

```bash
nslookup google.com 8.8.8.8

>>>
Server:         8.8.8.8
Address:        8.8.8.8#53

Non-authoritative answer:
Name:   google.com
Address: 172.217.25.174
Name:   google.com
Address: 2404:6800:400a:80a::200e
```

기본적(`nslookup google.com`)으로는 나의 로컬 네트워크에서 지정한 DNS 서버(`192.168.111.2`)를 통해 `google.com`의 도메인 정보를 조회하지만, 

`nslookup google.com 8.8.8.8`은 **Google DNS 서버(8.8.8.8)**를 사용하여 `google.com`의 도메인 정보를 조회합니다.

### 대화형 모드 사용

**대화형 모드**는 nslookup 명령어를 입력한 후, 다양한 설정 명령어를 사용하여 추가적인 DNS 조회 작업을 수행할 수 있는 모드입니다.

```bash
nslookup
```

`nslookup`을 입력한 후, `Enter`를 누르면 대화형 모드로 진입합니다. 

대화형 모드의 추가 설정 명령어(`set type=`, `server`, `exit` 등)를 통해 보다 세부적인 DNS 조회를 수행할 수 있습니다.

`server`는 나의 DNS 서버를 출력하며, `exit`는 대화형 모드를 종료하는 명령어 입니다.

#### 특정 레코드 유형 조회(set type=레코드 유형)

`set type=` 다음에는 조회하고자 하는 **DNS 레코드 유형**을 지정합니다.(`set type=레코드 유형`)

DNS 레코드의 유형에는 많은 종류가 있으며, DNS 레코드 유형에 대한 자세한 설명은 `host` 명령어를 참조하십시오.(👉 [host 명령어](https://ehdgur5123.github.io/posts/LinuxCommand-host))

여기에서는 간단한 예제를 통해 사용 방법을 알아보겠습니다.

```bash
nslookup  #엔터
> set type=ns  #엔터
> google.com  #엔터
```

1. `nslookup` 명령어를 통해 대화명 모드에 진입합니다.
2. `set type=ns` 명령어를 통해 다음에 입력할 도메인(`google.com`)의 네임 서버(NS) 정보를 출력합니다.

# (추가정보) 나의 DNS 서버 보기

현재 시스템에서 어떤 DNS 서버를 사용하고 있는지에 대한 정보는 `/etc/resolv.conf` 파일에 위치해 있습니다.

```bash
cat /etc/resolv.conf

>>>
# Generated by NetworkManager
search localdomain
nameserver 192.168.111.2
```

여기에서 `192.168.111.2`는 나의 DNS 서버의 IP 주소입니다.

<small>**53번 포트**는 **DNS 요청 및 응답에 기본적으로 사용되는 표준 포트**입니다.</small>

**추가 네트워크 구성 예**

1. <b>사용자 시스템 IP</b>: `192.168.111.128` (현재 컴퓨터의 IP)
2. <b>게이트웨이</b>: `192.168.111.1` (라우터의 IP)
3. <b>DNS 서버</b>: `192.168.111.2` (로컬 네트워크 또는 라우터에서 지정한 DNS 서버)
