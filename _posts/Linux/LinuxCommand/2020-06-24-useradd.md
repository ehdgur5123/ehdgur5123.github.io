---
layout: single
title: "useradd 명령어"
categories: Linux
tag: [Linux, useradd]
permalink : /posts/LinuxCommand-useradd/
classes : custom-style
toc: true
author_profile: false
sidebar:
  nav: "Linux"
---

<hr>

# useradd 명령어

`useradd` 명령어는 Linux 및 Unix 계열 운영 체제에서 **새로운 사용자를 추가**하는 데 사용됩니다. 이 명령어는 시스템에 새로운 사용자 계정을 생성하고, 사용자에게 홈 디렉토리, 그룹, 셸 등 다양한 설정을 할 수 있습니다.

## useradd 명령어 기본 구문

```bash
useradd [옵션] <사용자이름>
```

`useradd` 명령어는 옵션 없이 사용하면 **기본 설정**으로 새로운 사용자를 추가합니다. 그러나 홈 디렉토리, 셸, 그룹 등을 커스터마이징하려면 옵션을 함께 사용해야 합니다.

## 주요 옵션 및 조건

### 홈 디렉토리 지정 (-d)

`-d`: "directory"의 약자로, 사용자 계정의 **홈 디렉토리 경로를 지정**합니다. 기본적으로 `/home/사용자이름`에 홈 디렉토리가 생성되지만, 이 옵션을 사용하여 다른 경로를 지정할 수 있습니다.

```bash
useradd -d /custom/home <사용자이름>
```

예시: `/custom/home` 경로에 홈 디렉토리를 생성하여 사용자를 추가합니다.

### 기본 셸 지정 (-s)

`-s`: "shell"의 약자로, 사용자가 로그인할 때 사용할 **기본 셸을 지정**합니다. 기본적으로 `/bin/bash`가 사용되지만, 이 옵션을 사용하여 다른 셸(예: `/bin/zsh`, `/bin/sh`)을 지정할 수 있습니다.

```bash
useradd -s /bin/zsh <사용자이름>
```

예시: 기본 셸을 `/bin/zsh`로 설정한 사용자를 추가합니다.

### 사용자 ID 지정 (-u)

-u: "user ID"의 약자로, 사용자 계정에 **사용자 ID (UID)**를 직접 지정할 수 있습니다. 기본값은 시스템에서 자동으로 할당되지만, 특정 UID를 부여해야 하는 경우 이 옵션을 사용합니다.

```bash
useradd -u 1234 <사용자이름>
```

예시: UID `1234`를 가진 사용자를 생성합니다.

### 그룹 지정 (-g)

`-g`: "group"의 약자로, 사용자가 속할 **기본 그룹을 지정**합니다. 기본적으로 사용자와 같은 이름의 그룹이 생성되지만, 이 옵션을 사용하여 이미 존재하는 그룹에 추가할 수 있습니다.

```bash
useradd -g <그룹이름> <사용자이름>
```

예시: `그룹이름`에 속한 새로운 사용자를 추가합니다.

### 추가 그룹 지정 (-G)

`-G`: "groups"의 약자로, 사용자가 속할 추가 그룹을 지정합니다. 사용자는 여러 그룹에 속할 수 있으며, 이 옵션을 사용하여 **사용자에게 하나 이상의 추가 그룹을 할당**할 수 있습니다.

```bash
useradd -G wheel,dev <사용자이름>
```

예시: 새로운 사용자를 `wheel` 그룹과 `dev` 그룹에 추가합니다.

### 암호 만료일 지정 (-e)

`-e`: "expire(만료)"의 약자로, **사용자의 암호 만료일을 지정**합니다. 이 옵션은 사용자의 암호가 언제 만료될지 설정할 때 사용하며, 만료일을 `YYYY-MM-DD` 형식으로 지정합니다.

```bash
useradd -e 2024-12-31 <사용자이름>
```

예시: `2024년 12월 31일`에 암호가 만료되도록 설정한 사용자를 추가합니다.

### 홈 디렉토리 생성 (-m)

`-m`: "make home directory"의 의미로, 사용자의 **홈 디렉토리를 자동으로 생성**합니다. 기본적으로 홈 디렉토리는 `/home/사용자이름`에 생성되며, 이 옵션을 사용하지 않으면 홈 디렉토리가 자동으로 생성되지 않을 수 있습니다.

```bash
useradd -m <사용자이름>
```

예시: `/home/사용자이름`에 홈 디렉토리를 생성하면서 사용자를 추가합니다.

### 시스템 계정 생성 (-r)

`-r`: **시스템 계정을 생성할 때 사용**합니다. 시스템 계정은 일반 사용자 계정과 다르게 로그인 기능이 없으며, 특정 서비스를 위한 계정으로 사용됩니다. 이 계정은 홈 디렉토리를 생성하지 않으며, UID는 일반 사용자와 다른 범위를 가집니다.

```bash
useradd -r <사용자이름>
```

예시: 로그인이 불가능한 시스템 계정을 생성합니다.

#### 시스템 계정이란?

**시스템 계정**은 일반 사용자가 아닌 시스템 <b>서비스</b>나 <b>데몬</b>과 같은 특정 프로세스를 실행하기 위해 사용되는 특별한 유형의 계정입니다. 주로 <b>백그라운드에서 실행되는 서비스</b>나 <b>시스템 관리 작업을 위한 계정</b>으로, 사람이 직접 로그인하지 않는 계정입니다. 이 계정은 보안 및 권한 관리 측면에서 중요한 역할을 합니다.

#### 시스템 계정의 특징

1. **로그인 불가**: 시스템 계정은 일반적으로 로그인 셸을 할당받지 않거나, 로그인 가능한 경로가 제한되어 있어 직접 로그인할 수 없습니다.

2. **홈 디렉토리 없음**: 시스템 계정은 보통 홈 디렉토리가 생성되지 않으며, 필요에 따라 특정 작업을 위한 제한된 환경만 제공합니다.

3. **낮은 UID 범위**: 시스템 계정은 <b>UID(사용자 ID)</b>가 일반 사용자 계정과는 다른 범위로 할당됩니다. 일반적으로 <u>0~999 사이의 UID는 시스템 계정</u>으로 예약되어 있으며, <u>1000 이상의 UID는 일반 사용자 계정</u>에 할당됩니다.

4. **서비스 또는 데몬 전용**: 시스템 계정은 `Apache`, `MySQL`, `SSH`와 같은 시스템 서비스 또는 데몬을 실행하기 위해 주로 사용됩니다.

#### 시스템 계정 사용의 장점

1. **보안 강화**: 시스템 계정은 일반 사용자 계정과 분리되어 서비스나 데몬이 실행될 때 보안을 강화할 수 있습니다. 서비스가 시스템 계정으로 실행됨으로써 다른 사용자나 프로세스에 의한 권한 침해를 방지합니다.

2. **권한 제어**: 시스템 계정은 <b>특정 서비스에만 제한된 권한을 부여</b>하여, 해당 계정이 시스템의 다른 영역에 접근하지 않도록 할 수 있습니다. 예를 들어, Apache는 웹 서버 작업만 수행하고, 파일 시스템의 다른 부분에 영향을 미치지 않도록 설정할 수 있습니다.

3. **서비스 간 격리**: 시스템 계정은 각 서비스가 서로 독립적으로 실행되도록 하여, <b>서비스 간의 충돌을 방지</b>하고 문제가 발생할 경우 한 서비스가 다른 서비스에 영향을 미치는 것을 줄입니다.

#### 대표적인 시스템 계정 예시

1. `www-data`: <b>Apache/Nginx</b> 웹 서버가 사용하는 시스템 계정.

2. `mysql`: <b>MySQL/MariaDB</b> 데이터베이스 서버가 사용하는 시스템 계정.

3. `sshd`: <b>SSH 데몬(원격 접속 서비스)</b>을 실행하는 시스템 계정.

4. `nobody`: 권한이 거의 없는 계정으로, <b>특별한 권한이 필요하지 않은 서비스</b>가 사용하는 계정.
