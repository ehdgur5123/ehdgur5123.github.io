---
layout: single
title: "리다이렉션"
categories: Linux
tag: [Linux]
permalink : /posts/LinuxMaster-04/
classes : custom-style
toc: true
author_profile: false
sidebar:
  nav: "Linux"
---

<hr>

# 리다이렉션(Redirection)

리눅스에서 **리다이렉션(redirection)**은 명령어의 입력이나 출력을 다른 파일이나 장치로 전달하는 기능입니다.

기본적으로 명령어는 표준 입력(키보드)과 표준 출력(화면)을 사용하지만, 리다이렉션을 통해 파일을 입력으로 사용하거나 출력 결과를 파일에 저장할 수 있습니다. 

## 1. 표준 스트림

리눅스에서는 3가지 기본 스트림(표준 입력, 표준 출력, 표준 오류)이 있습니다

리다이렉션을 사용하면 이 스트림들을 파일로 바꾸거나, 다른 출력으로 보낼 수 있습니다.

### 표준 입력(standard input, stdin)

파일 디스크립터 **0**으로, 기본적으로 키보드에서 입력을 받습니다.

### 표준 출력(standard output, stdout)

파파일 디스크립터**1**로, 명령어의 결과를 기본적으로 화면에 출력합니다.

### 표준 오류(standard error, stderr)

파일 디스크립터 **2**로, 오류 메시지를 화면에 출력합니다.

## 2. 출력 리다이렉션

명령어의 출력을 파일로 저장하거나 다른 장치로 보낼 수 있습니다.

### 덮어쓰기(>)

`>`: 기존 파일을 덮어쓰며 출력 내용을 저장합니다.

```bash
command > file.txt
```

예: `ls > list.txt`는 `ls` 명령어의 출력을 `list.txt` 파일에 저장합니다. 파일이 이미 있으면 *덮어씁니다.*

> 설명자 1이 생략된 것으로, `command 1> file.txt`을 입력해도 같은 결과가 나옴

### 내용 추가하기(>>)

`>>`: 기존 파일의 내용을 유지하면서 출력 내용을 추가(append)합니다.

```bash
command >> file.txt
```

예: `echo "Hello" >> greetings.txt`는 `greetings.txt` 파일에 `"Hello"`를 추가합니다.

## 3. 입력 리다이렉션

파일의 내용을 명령어에 입력으로 전달할 수 있습니다.

### 파일에서 입력 받기(<)

`<`: 파일에서 입력을 받습니다.

```bash
command < file.txt
```

예: `sort < unsorted.txt`는 `unsorted.txt` 파일을 읽어서 내용을 정렬합니다.

## 4. 오류 출력 리다이렉션

오류 메시지를 파일로 저장하거나 다른 장치로 보낼 수 있습니다.

### 오류 메시지 저장(2>)

`2>`: 오류 메시지를 파일로 저장합니다.

```bash
command 2> error.txt
```

예: `ls nonexistentfile 2> error.txt`는 `ls` 명령어로 존재하지 않는 파일을 찾으려고 할 때 발생하는 오류 메시지를 `error.txt `파일에 저장합니다.

### 오류 메시지 버리기(2> /dev/null)

오류 메시지를 파일에 따로 저장하지 않고, 출력만 나오지 않게 하고 싶다면 `/dev/null`에 버리면 됩니다.

`/dev/null`은 특별한 파일로, 블랙홀과 같은 역할. 데이터를 이 파일로 보내면 그 데이터는 사라지고 아무런 결과도 남기지 않음

```bash
find -name opt 2> /dev/null
```

위의 예시에서는 `opt`라는 이름의 파일을 찾는 명령어로, 권한이 없는 곳에 접근 했을때의 수 많은 오류 메시지를 버리므로써, 원하는 결과만 출력하게 할 수 있다.

## 5. stdout과 stderr을 동시에 리다이렉션

표준 출력과 오류 출력을 모두 하나의 파일에 보내는 방식

동시에 리다이렉션하는 방식에는 `&>`와 `2>&1`이 있지만, 방식의 차이일 뿐 결과는 거의 같다고 함

`&>`는 bash에서만 지원되는 문법으로, `2>&1`이 관습적으로 많이 사용됨

### &>

`&>`: 표준 출력과 표준 오류를 *한 번에 같이* 리다이렉션합니다. Bash에서 제공하는 간편한 문법입니다.

```bash
command &> output.txt
```

### 2>&1

`2>&1`: 표준 출력과 표준 오류를 *순차적으로* 리다이렉션합니다. 즉, 먼저 표준 출력을 리다이렉션한 후, 표준 오류를 표준 출력과 합치는 방식입니다.

```bash
command > output.txt 2>&1
```