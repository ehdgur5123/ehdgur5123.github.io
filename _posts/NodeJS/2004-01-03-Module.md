---
layout: single
title: "노드의 모듈"
categories: NodeJS
tag: [NodeJS]
permalink : /posts/NodeJS-03/
toc: true
classes: custom-style
author_profile: false
sidebar:
  nav: "NodeJS"
---

<hr>

# 노드의 모듈이란?

- 프로그램을 작은 기능 단위로 쪼개고 파일 형태로 저장해 놓은 것
- 코드를 중복해서 작성하지 않아도 된다.
- 수정이 필요한 경우 필요한 모듈만 수정하면 된다

# CommonJS 모듈 시스템과 ES 모듈 시스템

- *CommonJS 모듈 시스템*: Node.js의 기본 모듈 시스템(require, module.exports 사용)
- *ES 모듈 시스템*: ECMAScript의 표준 모듈 시스템(import, export 사용)
- Node.js에서는 기본적으로 CommonJS 모듈 시스템을 사용하고 있었지만, 에크마스크립트가 발전하면서 ES 모듈 시스템도 지원하게 되었음
- NodeJS의 공식 문서에서 제공하는 [예제 코드](https://nodejs.org/docs/latest/api/path.html#pathdirnamepath)를 보면 CJS와 ESM이 표시되어 있는데, CommonJS 모듈 시스템을 사용하고 싶다면 *CJS*, ES 모듈 시스템을 사용하고 싶다면 *ESM*을 선택하면 된다.

<p id="img_center">
  <img 
        src="../../assets/images/JodeJS/3-01.png"
        alt="image"
        title="image"
  >
</p>

<p id="img_center">
  <img 
        src="../../assets/images/JodeJS/3-02.png"
        alt="image"
        title="image"
  >
</p>

# 모듈 내보내기

모듈을 내보내는 파일에는 다음과 같은 코드로 내보낼 모듈을 익스포트<sup>export</sup> 해주어야 합니다.

```javascript
module.exports = 외부로 내보낼 함수 또는 변수

// ex) module.exports = user;
```

# 모듈 가져오기

모듈을 가져오는 파일에는 다음과 같은 코드로 가져올 모듈을 임포트<sup>import</sup> 해주어야 합니다.

```javascript
require(모듈 파일 경로)

// ex) const user = require("./user");
```

# 직접 모듈 만들기

*CommonJS 모듈 시스템*을 사용하여 직접 모듈을 만들어 보겠습니다.

```javascript
const user = "홍길동";

const hello = (name) => {
  console.log(`${name} 님, 안녕하세요?`);
};

hello(user);
```

다음 코드는 `user`를 입력 받고, `hello` 함수를 통해 `user 님, 안녕하세요?`라는 문구를 출력하는 코드입니다.

이 코드를 다음과 같이 모듈로 나누어 보겠습니다.

- user 변수를 모듈로 내보내는 *user.js* 파일
- hello 함수를 모듈로 내보내는 *hello.js* 파일
- user 변수와 hello 함수를 가져오는 *app.js* 파일

## 1. user.js 파일

```javascript
const user = "홍길동";

module.exports = user; // user 변수 내보내기
```

## 2. hello.js 파일

```javascript
const hello = (name) => {
  console.log(`${name} 님, 안녕하세요?`);
};

module.exports = hello; // hello 함수 내보내기
```

## 3. app.js 파일

```javascript
const user = require("./user"); // user.js에서 user 가져오기
const hello = require("./hello"); // hello.js에서 hello 가져오기

hello(user); // 모듈에서 가져온 user 변수와 hello 함수 사용하기
```

`require()` 내부에는 가져올 모듈의 파일 경로를 입력하면 됩니다. 같은 경로에 있으므로 `"./user.js"`로 입력해주며, 확장자(`.js`)는 생략 가능합니다.

# 2개 이상의 모듈 사용하기

## 1. 2개 이상의 모듈 내보내기

2개 이상의 모듈을 내보내기 위해서는 중괄호(`{}`)로 감싸주면 됩니다.

```javascript
const user1 = "Kim";
const user2 = "Lee";
const user3 = "Pack";

module.exports = {user1, user2};
```

## 2. 2개 이상의 모듈 가져오기

2개 이상의 모듈을 가져올때도 중괄호(`{}`)로 감싸주면 됩니다.

```javascript
const {user1, user2} = require("./users-1");
```

# 노트의 코어 모듈

